(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{173:function(e,t,n){"use strict";n.r(t);var s=n(0),o=Object(s.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e._m(0),e._v(" "),n("p",[e._v("Nginx echo模块是在nginx程序上扩展了 "),n("code",[e._v("echo")]),e._v(" 输出字符的功能，对于调试很方便，项目地址: "),n("a",{attrs:{href:"https://github.com/openresty/echo-nginx-module",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/openresty/echo-nginx-module"),n("OutboundLink")],1),e._v(" 。")]),e._v(" "),e._m(1),e._v(" "),n("blockquote",[n("p",[e._v("目前支持 "),n("code",[e._v("nginx-1.11.2")]),e._v("，高版本可能安装失败，我装 "),n("code",[e._v("1.11.13")]),e._v(" 失败了，更多支持nginx的版本见: "),n("a",{attrs:{href:"https://github.com/openresty/echo-nginx-module#compatibility",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/openresty/echo-nginx-module#compatibility"),n("OutboundLink")],1)])]),e._v(" "),n("p",[e._v("去 "),n("a",{attrs:{href:"https://github.com/openresty/echo-nginx-module/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("release"),n("OutboundLink")],1),e._v(" 下载最新的安装包，并解压.")]),e._v(" "),n("p",[e._v("在配置 Nginx 时用: "),n("code",[e._v("./configure --add-module=/你的解压路径")]),e._v("，并编译安装，如果是重新编译安装可参考: "),n("router-link",{attrs:{to:"/guide/linux-install.html#重新编译安装"}},[e._v("重新编译安装")])],1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16),n("p",[e._v("异步跟同步的区别是:")]),e._v(" "),e._m(17),e._v(" "),n("p",[e._v("下面这个整个时间为2s，因为新路径最大是2s:")]),e._v(" "),e._m(18),e._m(19),e._v(" "),e._m(20),e._m(21),e._v(" "),e._m(22),e._v(" "),e._m(23),e._v(" "),e._m(24),e._m(25),e._v(" "),e._m(26),e._m(27),e._v(" "),e._m(28),e._v(" "),e._m(29),n("p",[e._v("访问: "),n("code",[e._v("/api/combo?/a.js,/b.js")]),e._v("，需要注意的是文件的路径必须以"),n("code",[e._v("/")]),e._v("开始，因为匹配的"),n("code",[e._v("location")]),e._v("，当然真的 "),n("code",[e._v("nginx-combo")]),e._v(" 服务请看: "),n("router-link",{attrs:{to:"/example/http-concat.html"}},[e._v("nginx-http-concat")])],1),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("其他变量请去官网查看~")]),e._v(" "),e._m(30),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/openresty/echo-nginx-module",target:"_blank",rel:"noopener noreferrer"}},[e._v("官网"),n("OutboundLink")],1)]),e._v(" "),e._m(31)])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"学习使用-echo-模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#学习使用-echo-模块","aria-hidden":"true"}},[this._v("#")]),this._v(" 学习使用 echo 模块")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("只是研究了一些常用的")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"echo-输出字符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#echo-输出字符","aria-hidden":"true"}},[this._v("#")]),this._v(" echo - 输出字符")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("语法: "),t("code",[this._v("echo [options] <string>...")])]),this._v(" "),t("li",[this._v("默认值: "),t("code",[this._v("no")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('# 简单的hello，world!\nserver {\n    location = /api/hello {\n        echo "hello，world!";\n    }\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("默认echo会自动换行，不需要换行可以: "),t("code",[this._v("echo -n xxx;")]),this._v(";")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"echo-before-body，echo-after-body-页面前、后插入内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#echo-before-body，echo-after-body-页面前、后插入内容","aria-hidden":"true"}},[this._v("#")]),this._v(" echo_before_body，echo_after_body - 页面前、后插入内容")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("语法: "),t("code",[this._v("echo_before_body [options] [argument]...")])]),this._v(" "),t("li",[this._v("默认值: "),t("code",[this._v("no")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('server {\n    # 简单的输出\n    location = /api/hello {\n        echo_before_body echo_before_body;\n        echo "hello，world!";\n        echo_after_body echo_after_body;\n    }\n\n    # 常见于代理页面前、后插内容\n    location = /api/proxy_before_after {\n        echo_before_body echo_before_body;\n        echo_before_body echo_before_body;\n        proxy_pass http://127.0.0.1;\n        echo_after_body echo_after_body;\n        echo_after_body echo_after_body;\n    }\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"echo-sleep-请求等待"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#echo-sleep-请求等待","aria-hidden":"true"}},[this._v("#")]),this._v(" echo_sleep - 请求等待")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("语法: "),t("code",[this._v("echo_sleep <seconds>")])]),this._v(" "),t("li",[this._v("默认值: "),t("code",[this._v("no")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("server {\n    # 简单的输出\n    location = /api/sleep {\n        echo 1;\n\n        # 等待1秒\n        echo_sleep 1;\n\n        echo 2;\n    }\n}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"echo-location-async，echo-location-请求指定路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#echo-location-async，echo-location-请求指定路径","aria-hidden":"true"}},[this._v("#")]),this._v(" echo_location_async，echo_location - 请求指定路径")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("语法: "),t("code",[this._v("echo_location_async <location> [<url_args>]")])]),this._v(" "),t("li",[this._v("默认值: "),t("code",[this._v("no")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("location /main {\n    # 异步调用/sub\n    echo_location_async /sub;\n\n    echo world;\n}\n\nlocation /main2 {\n    # 同步调用/sub\n    echo_location_async /sub;\n\n    echo world;\n}\n\nlocation /sub {\n    echo hello;\n}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("异步会并行的去请求")]),this._v(" "),t("li",[this._v("同步等待当前请求结束才会往下执行")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v(' location /main {\n     echo_location_async /sub1;\n     echo_location_async /sub2;\n     echo "took $echo_timer_elapsed sec for total.";\n }\n location /sub1 {\n     echo_sleep 2;\n }\n location /sub2 {\n     echo_sleep 1;\n }\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("下面这个整个时间为3s，因为需要等待"),t("code",[this._v("/sub1")]),this._v("完成才进入"),t("code",[this._v("/sub2")]),this._v(":")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v(' location /main {\n     echo_location /sub1;\n     echo_location /sub2;\n     echo "took $echo_timer_elapsed sec for total.";\n }\n location /sub1 {\n     echo_sleep 2;\n }\n location /sub2 {\n     echo_sleep 1;\n }\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("可以通过第二个参数传"),t("code",[this._v("querystring")]),this._v(": "),t("code",[this._v("echo_location_async /sub 'foo=Foo&bar=Bar';")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"echo-foreach-split-分隔循环"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#echo-foreach-split-分隔循环","aria-hidden":"true"}},[this._v("#")]),this._v(" echo_foreach_split - 分隔循环")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("语法: "),t("code",[this._v("echo_foreach_split <delimiter> <string>")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("location /split {\n    echo_foreach_split ',' $arg_list;\n        echo \"item: $echo_it\";\n    echo_end;\n}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("上面配置当访问: "),t("code",[this._v("/split?list=cat,dog,mouse")]),this._v(" 时会输出:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("item: cat\nitem: dog\nitem: mouse\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("$arg_list")]),this._v("是对应"),t("code",[this._v("$args.list")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("那么配置全"),t("code",[this._v("echo_location_async")]),this._v("可以做成"),t("code",[this._v("nginx-combo")]),this._v("服务了，如:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("location = /api/combo {\n    echo_foreach_split ',' $query_string;\n        echo \"/* combo: $echo_it */\";\n        echo_location_async $echo_it;\n        echo;\n    echo_end;\n}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"link"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#link","aria-hidden":"true"}},[this._v("#")]),this._v(" link")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"//echo.xuexb.com"}},[this._v("我写的在线Demo")])])}],!1,null,null,null);t.default=o.exports}}]);